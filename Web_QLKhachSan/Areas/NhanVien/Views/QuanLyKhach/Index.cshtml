
@{
    ViewBag.Title = "Index";
}
<link rel='stylesheet' href='@Url.Content("~/Areas/NhanVien/assets/css/quanly-khach.css")' />
<script src='@Url.Content("~/Areas/NhanVien/assets/js/quanly-khach.js")'></script>
<div class="main-content">
    <!-- Top Header -->
    <header class="dashboard-header">
        <div class="header-left">
            <button class="sidebar-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <div class="page-title">
                <h1>Quản Lý Khách Hàng</h1>
                <p>Theo dõi và quản lý thông tin khách hàng</p>
            </div>
        </div>
        <div class="header-right">
            <button class="btn btn-primary" id="add-guest-btn">
                <i class="fas fa-user-plus"></i>
                Thêm khách mới
            </button>
        </div>
    </header>

    <!-- Guest Management Content -->
    <main class="dashboard-main">
        <!-- Quick Stats -->
        <section class="guest-stats-section">
            <div class="row">
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="stat-card total-guests">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3>1,247</h3>
                            <p>Tổng khách hàng</p>
                            <span class="stat-change positive">+12% tháng này</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="stat-card current-guests">
                        <div class="stat-icon">
                            <i class="fas fa-bed"></i>
                        </div>
                        <div class="stat-info">
                            <h3>48</h3>
                            <p>Khách đang lưu trú</p>
                            <span class="stat-change">Trong 42 phòng</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="stat-card vip-guests">
                        <div class="stat-icon">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="stat-info">
                            <h3>89</h3>
                            <p>Khách VIP</p>
                            <span class="stat-change">Gold & Platinum</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="stat-card checkin-today">
                        <div class="stat-icon">
                            <i class="fas fa-sign-in-alt"></i>
                        </div>
                        <div class="stat-info">
                            <h3>12</h3>
                            <p>Check-in hôm nay</p>
                            <span class="stat-change positive">+3 so với hôm qua</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Guest Filters and Search -->
        <section class="guest-filter-section">
            <div class="filter-card">
                <div class="row align-items-end">
                    <div class="col-md-3">
                        <label class="form-label">Tìm kiếm</label>
                        <div class="search-box">
                            <input type="text" class="form-control" id="guest-search"
                                   placeholder="Tên, số điện thoại, email...">
                            <i class="fas fa-search"></i>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Trạng thái</label>
                        <select class="form-select" id="guest-status-filter">
                            <option value="">Tất cả</option>
                            <option value="staying">Đang lưu trú</option>
                            <option value="checked-out">Đã check-out</option>
                            <option value="blacklist">Danh sách đen</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Hạng thành viên</label>
                        <select class="form-select" id="member-tier-filter">
                            <option value="">Tất cả</option>
                            <option value="standard">Standard</option>
                            <option value="silver">Silver</option>
                            <option value="gold">Gold</option>
                            <option value="platinum">Platinum</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Quốc tịch</label>
                        <select class="form-select" id="nationality-filter">
                            <option value="">Tất cả</option>
                            <option value="vn">Việt Nam</option>
                            <option value="us">Hoa Kỳ</option>
                            <option value="jp">Nhật Bản</option>
                            <option value="kr">Hàn Quốc</option>
                            <option value="other">Khác</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Sắp xếp</label>
                        <select class="form-select" id="sort-filter">
                            <option value="name">Tên A-Z</option>
                            <option value="checkin">Check-in gần nhất</option>
                            <option value="spending">Chi tiêu cao nhất</option>
                            <option value="visits">Số lần ghé thăm</option>
                        </select>
                    </div>
                    <div class="col-md-1">
                        <button class="btn btn-outline-secondary" id="clear-guest-filters">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Guests List -->
        <section class="guests-list-section">
            <div class="guests-card">
                <div class="guests-header">
                    <h3>Danh sách khách hàng</h3>
                    <div class="guests-actions">
                        <button class="btn btn-outline-primary btn-sm" id="export-guests-btn">
                            <i class="fas fa-download"></i> Xuất Excel
                        </button>
                        <div class="view-toggle">
                            <button class="btn btn-outline-secondary btn-sm active" id="grid-view-btn">
                                <i class="fas fa-th"></i>
                            </button>
                            <button class="btn btn-outline-secondary btn-sm" id="list-view-btn">
                                <i class="fas fa-list"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Grid View -->
                <div class="guests-grid" id="guests-grid">
                    <div class="guest-card">
                        <div class="guest-avatar">
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Guest">
                            <div class="guest-status staying"></div>
                        </div>
                        <div class="guest-info">
                            <h5>Trần Văn Hùng</h5>
                            <p class="guest-contact">
                                <i class="fas fa-phone"></i> 0901234567<br>
                                <i class="fas fa-envelope"></i> hung@email.com
                            </p>
                            <div class="guest-details">
                                <span class="member-tier gold">
                                    <i class="fas fa-star"></i> Gold
                                </span>
                                <span class="room-info">
                                    Phòng 203 • 2 đêm
                                </span>
                            </div>
                        </div>
                        <div class="guest-actions">
                            <button class="btn btn-sm btn-outline-primary" title="Xem chi tiết">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-success" title="Check-out">
                                <i class="fas fa-sign-out-alt"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-info" title="Dịch vụ">
                                <i class="fas fa-concierge-bell"></i>
                            </button>
                        </div>
                    </div>

                    <div class="guest-card">
                        <div class="guest-avatar">
                            <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="Guest">
                            <div class="guest-status staying"></div>
                        </div>
                        <div class="guest-info">
                            <h5>Nguyễn Thị Lan</h5>
                            <p class="guest-contact">
                                <i class="fas fa-phone"></i> 0907654321<br>
                                <i class="fas fa-envelope"></i> lan@email.com
                            </p>
                            <div class="guest-details">
                                <span class="member-tier platinum">
                                    <i class="fas fa-crown"></i> Platinum
                                </span>
                                <span class="room-info">
                                    Phòng 405 • 3 đêm
                                </span>
                            </div>
                        </div>
                        <div class="guest-actions">
                            <button class="btn btn-sm btn-outline-primary" title="Xem chi tiết">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-success" title="Check-out">
                                <i class="fas fa-sign-out-alt"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-info" title="Dịch vụ">
                                <i class="fas fa-concierge-bell"></i>
                            </button>
                        </div>
                    </div>

                    <div class="guest-card">
                        <div class="guest-avatar">
                            <img src="https://randomuser.me/api/portraits/men/45.jpg" alt="Guest">
                            <div class="guest-status checked-out"></div>
                        </div>
                        <div class="guest-info">
                            <h5>Lê Minh Đức</h5>
                            <p class="guest-contact">
                                <i class="fas fa-phone"></i> 0912345678<br>
                                <i class="fas fa-envelope"></i> duc@email.com
                            </p>
                            <div class="guest-details">
                                <span class="member-tier silver">
                                    <i class="fas fa-medal"></i> Silver
                                </span>
                                <span class="room-info">
                                    Đã check-out • 25/09
                                </span>
                            </div>
                        </div>
                        <div class="guest-actions">
                            <button class="btn btn-sm btn-outline-primary" title="Xem chi tiết">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-secondary" title="Lịch sử">
                                <i class="fas fa-history"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-warning" title="Đặt lại">
                                <i class="fas fa-redo"></i>
                            </button>
                        </div>
                    </div>

                    <div class="guest-card">
                        <div class="guest-avatar">
                            <img src="https://randomuser.me/api/portraits/women/78.jpg" alt="Guest">
                            <div class="guest-status staying"></div>
                        </div>
                        <div class="guest-info">
                            <h5>Phạm Thị Hoa</h5>
                            <p class="guest-contact">
                                <i class="fas fa-phone"></i> 0908765432<br>
                                <i class="fas fa-envelope"></i> hoa@email.com
                            </p>
                            <div class="guest-details">
                                <span class="member-tier standard">
                                    <i class="fas fa-user"></i> Standard
                                </span>
                                <span class="room-info">
                                    Phòng 302 • 1 đêm
                                </span>
                            </div>
                        </div>
                        <div class="guest-actions">
                            <button class="btn btn-sm btn-outline-primary" title="Xem chi tiết">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-success" title="Check-out">
                                <i class="fas fa-sign-out-alt"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-info" title="Dịch vụ">
                                <i class="fas fa-concierge-bell"></i>
                            </button>
                        </div>
                    </div>

                    <div class="guest-card">
                        <div class="guest-avatar">
                            <img src="https://randomuser.me/api/portraits/men/67.jpg" alt="Guest">
                            <div class="guest-status staying"></div>
                        </div>
                        <div class="guest-info">
                            <h5>John Smith</h5>
                            <p class="guest-contact">
                                <i class="fas fa-phone"></i> +1-555-0123<br>
                                <i class="fas fa-envelope"></i> john@email.com
                            </p>
                            <div class="guest-details">
                                <span class="member-tier gold">
                                    <i class="fas fa-star"></i> Gold
                                </span>
                                <span class="room-info">
                                    Phòng 507 • 4 đêm
                                </span>
                            </div>
                        </div>
                        <div class="guest-actions">
                            <button class="btn btn-sm btn-outline-primary" title="Xem chi tiết">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-success" title="Check-out">
                                <i class="fas fa-sign-out-alt"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-info" title="Dịch vụ">
                                <i class="fas fa-concierge-bell"></i>
                            </button>
                        </div>
                    </div>

                    <div class="guest-card">
                        <div class="guest-avatar">
                            <img src="https://randomuser.me/api/portraits/women/23.jpg" alt="Guest">
                            <div class="guest-status checked-out"></div>
                        </div>
                        <div class="guest-info">
                            <h5>Takeshi Yamamoto</h5>
                            <p class="guest-contact">
                                <i class="fas fa-phone"></i> +81-90-1234<br>
                                <i class="fas fa-envelope"></i> takeshi@email.com
                            </p>
                            <div class="guest-details">
                                <span class="member-tier platinum">
                                    <i class="fas fa-crown"></i> Platinum
                                </span>
                                <span class="room-info">
                                    Đã check-out • 26/09
                                </span>
                            </div>
                        </div>
                        <div class="guest-actions">
                            <button class="btn btn-sm btn-outline-primary" title="Xem chi tiết">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-secondary" title="Lịch sử">
                                <i class="fas fa-history"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-warning" title="Đặt lại">
                                <i class="fas fa-redo"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- List View (Hidden by default) -->
                <div class="guests-table" id="guests-table" style="display: none;">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Khách hàng</th>
                                    <th>Liên hệ</th>
                                    <th>Hạng thành viên</th>
                                    <th>Phòng hiện tại</th>
                                    <th>Check-in</th>
                                    <th>Check-out</th>
                                    <th>Trạng thái</th>
                                    <th>Thao tác</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <div class="guest-info-compact">
                                            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Guest" class="guest-avatar-small">
                                            <div>
                                                <strong>Trần Văn Hùng</strong>
                                                <small>ID: #GU001247</small>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        0901234567<br>
                                        <small>hung@email.com</small>
                                    </td>
                                    <td><span class="member-tier gold"><i class="fas fa-star"></i> Gold</span></td>
                                    <td>203 - Deluxe Ocean View</td>
                                    <td>25/09/2025</td>
                                    <td>27/09/2025</td>
                                    <td><span class="status-badge staying">Đang lưu trú</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn btn-sm btn-outline-primary" title="Xem chi tiết">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-success" title="Check-out">
                                                <i class="fas fa-sign-out-alt"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Pagination -->
                <div class="guests-pagination">
                    <div class="pagination-info">
                        Hiển thị 1-6 của 48 khách hàng
                    </div>
                    <nav>
                        <ul class="pagination pagination-sm">
                            <li class="page-item disabled">
                                <span class="page-link">Trước</span>
                            </li>
                            <li class="page-item active">
                                <span class="page-link">1</span>
                            </li>
                            <li class="page-item">
                                <a class="page-link" href="#">2</a>
                            </li>
                            <li class="page-item">
                                <a class="page-link" href="#">3</a>
                            </li>
                            <li class="page-item">
                                <a class="page-link" href="#">Sau</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </section>

        <!-- Quick Actions -->
        <section class="quick-actions-section">
            <div class="row">
                <div class="col-md-4">
                    <div class="quick-action-card">
                        <div class="action-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="action-info">
                            <h5>Check-in hàng loạt</h5>
                            <p>Xử lý check-in cho nhiều khách cùng lúc</p>
                            <button class="btn btn-outline-primary btn-sm">Thực hiện</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="quick-action-card">
                        <div class="action-icon">
                            <i class="fas fa-door-open"></i>
                        </div>
                        <div class="action-info">
                            <h5>Check-out hàng loạt</h5>
                            <p>Xử lý check-out cho nhiều khách cùng lúc</p>
                            <button class="btn btn-outline-success btn-sm">Thực hiện</button>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="quick-action-card">
                        <div class="action-icon">
                            <i class="fas fa-envelope-open-text"></i>
                        </div>
                        <div class="action-info">
                            <h5>Gửi thông báo</h5>
                            <p>Gửi email/SMS cho khách hàng</p>
                            <button class="btn btn-outline-info btn-sm">Gửi tin</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
</div>

<!-- Add Guest Modal -->
<div class="modal fade" id="addGuestModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Thêm khách hàng mới</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="add-guest-form">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="form-section-title">Thông tin cá nhân</h6>
                            <div class="mb-3">
                                <label class="form-label">Họ và tên *</label>
                                <input type="text" class="form-control" name="full_name" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Giới tính</label>
                                <select class="form-select" name="gender">
                                    <option value="male">Nam</option>
                                    <option value="female">Nữ</option>
                                    <option value="other">Khác</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Ngày sinh</label>
                                <input type="date" class="form-control" name="birth_date">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Quốc tịch</label>
                                <select class="form-select" name="nationality">
                                    <option value="vn">Việt Nam</option>
                                    <option value="us">Hoa Kỳ</option>
                                    <option value="jp">Nhật Bản</option>
                                    <option value="kr">Hàn Quốc</option>
                                    <option value="other">Khác</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h6 class="form-section-title">Thông tin liên hệ</h6>
                            <div class="mb-3">
                                <label class="form-label">Số điện thoại *</label>
                                <input type="tel" class="form-control" name="phone" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Email</label>
                                <input type="email" class="form-control" name="email">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">CMND/CCCD/Passport *</label>
                                <input type="text" class="form-control" name="id_number" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Địa chỉ</label>
                                <textarea class="form-control" name="address" rows="3"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <h6 class="form-section-title">Thông tin bổ sung</h6>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Hạng thành viên</label>
                                        <select class="form-select" name="member_tier">
                                            <option value="standard">Standard</option>
                                            <option value="silver">Silver</option>
                                            <option value="gold">Gold</option>
                                            <option value="platinum">Platinum</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Yêu cầu đặc biệt</label>
                                        <input type="text" class="form-control" name="special_requests"
                                               placeholder="VD: Kiêng hải sản, cần xe lăn...">
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Ghi chú</label>
                                <textarea class="form-control" name="notes" rows="2"></textarea>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                <button type="button" class="btn btn-primary" id="save-guest-btn">Lưu thông tin</button>
            </div>
        </div>
    </div>
</div>

<!-- Guest Detail Modal -->
<div class="modal fade" id="guestDetailModal" tabindex="-1">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Chi tiết khách hàng</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="guestDetailContent">
                <!-- Content will be loaded dynamically -->
            </div>
        </div>
    </div>
</div>
