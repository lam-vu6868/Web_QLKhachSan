
@{
    ViewBag.Title = "Index";
}
<link rel='stylesheet' href='@Url.Content("~/Areas/NhanVien/assets/css/quanly-dichvu.css")' />
<script src='@Url.Content("~/Areas/NhanVien/assets/js/quanly-dichvu.js")'></script>
<div class="main-content">
    <!-- Top Header -->
    <header class="dashboard-header">
        <div class="header-left">
            <button class="sidebar-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <div class="page-title">
                <h1>Quản Lý Dịch Vụ</h1>
                <p>Theo dõi và xử lý các yêu cầu dịch vụ của khách hàng</p>
            </div>
        </div>
        <div class="header-right">
            <button class="btn btn-primary" id="new-service-request-btn">
                <i class="fas fa-plus"></i>
                Yêu cầu mới
            </button>
        </div>
    </header>

    <!-- Service Management Content -->
    <main class="dashboard-main">
        <!-- Service Stats -->
        <section class="service-stats-section">
            <div class="row">
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="stat-card pending-requests">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <h3>18</h3>
                            <p>Yêu cầu chờ xử lý</p>
                            <span class="stat-change">Cần xử lý ngay</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="stat-card in-progress">
                        <div class="stat-icon">
                            <i class="fas fa-spinner"></i>
                        </div>
                        <div class="stat-info">
                            <h3>12</h3>
                            <p>Đang thực hiện</p>
                            <span class="stat-change">Trung bình 15 phút</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="stat-card completed-today">
                        <div class="stat-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-info">
                            <h3>47</h3>
                            <p>Hoàn thành hôm nay</p>
                            <span class="stat-change positive">+8% so với hôm qua</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="stat-card revenue-today">
                        <div class="stat-icon">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="stat-info">
                            <h3>$2,340</h3>
                            <p>Doanh thu hôm nay</p>
                            <span class="stat-change positive">+12% so với hôm qua</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Service Categories -->
        <section class="service-categories-section">
            <div class="categories-header">
                <h3>Danh mục dịch vụ</h3>
                <div class="categories-toggle">
                    <button class="btn btn-outline-primary btn-sm active" id="all-categories-btn">
                        Tất cả
                    </button>
                    <button class="btn btn-outline-primary btn-sm" id="popular-categories-btn">
                        Phổ biến
                    </button>
                </div>
            </div>
            <div class="categories-grid">
                <div class="category-card" data-category="spa">
                    <div class="category-icon">
                        <i class="fas fa-spa"></i>
                    </div>
                    <div class="category-info">
                        <h5>Spa & Massage</h5>
                        <p>8 yêu cầu đang chờ</p>
                        <span class="category-revenue">$680 hôm nay</span>
                    </div>
                    <div class="category-status">
                        <span class="requests-count">8</span>
                    </div>
                </div>

                <div class="category-card" data-category="restaurant">
                    <div class="category-icon">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <div class="category-info">
                        <h5>Nhà hàng</h5>
                        <p>12 đơn hàng đang xử lý</p>
                        <span class="category-revenue">$1,120 hôm nay</span>
                    </div>
                    <div class="category-status">
                        <span class="requests-count">12</span>
                    </div>
                </div>

                <div class="category-card" data-category="room-service">
                    <div class="category-icon">
                        <i class="fas fa-concierge-bell"></i>
                    </div>
                    <div class="category-info">
                        <h5>Room Service</h5>
                        <p>6 yêu cầu đang thực hiện</p>
                        <span class="category-revenue">$340 hôm nay</span>
                    </div>
                    <div class="category-status">
                        <span class="requests-count">6</span>
                    </div>
                </div>

                <div class="category-card" data-category="laundry">
                    <div class="category-icon">
                        <i class="fas fa-tshirt"></i>
                    </div>
                    <div class="category-info">
                        <h5>Giặt ủi</h5>
                        <p>4 đơn đang xử lý</p>
                        <span class="category-revenue">$80 hôm nay</span>
                    </div>
                    <div class="category-status">
                        <span class="requests-count">4</span>
                    </div>
                </div>

                <div class="category-card" data-category="transport">
                    <div class="category-icon">
                        <i class="fas fa-car"></i>
                    </div>
                    <div class="category-info">
                        <h5>Đưa đón</h5>
                        <p>3 chuyến đang thực hiện</p>
                        <span class="category-revenue">$120 hôm nay</span>
                    </div>
                    <div class="category-status">
                        <span class="requests-count">3</span>
                    </div>
                </div>

                <div class="category-card" data-category="maintenance">
                    <div class="category-icon">
                        <i class="fas fa-tools"></i>
                    </div>
                    <div class="category-info">
                        <h5>Bảo trì</h5>
                        <p>2 yêu cầu khẩn cấp</p>
                        <span class="category-revenue">Miễn phí</span>
                    </div>
                    <div class="category-status urgent">
                        <span class="requests-count">2</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Service Requests -->
        <section class="service-requests-section">
            <div class="requests-card">
                <div class="requests-header">
                    <h3>Yêu cầu dịch vụ</h3>
                    <div class="requests-filters">
                        <select class="form-select form-select-sm" id="status-filter">
                            <option value="">Tất cả trạng thái</option>
                            <option value="pending">Chờ xử lý</option>
                            <option value="in-progress">Đang thực hiện</option>
                            <option value="completed">Hoàn thành</option>
                            <option value="cancelled">Đã hủy</option>
                        </select>
                        <select class="form-select form-select-sm" id="category-filter">
                            <option value="">Tất cả danh mục</option>
                            <option value="spa">Spa & Massage</option>
                            <option value="restaurant">Nhà hàng</option>
                            <option value="room-service">Room Service</option>
                            <option value="laundry">Giặt ủi</option>
                            <option value="transport">Đưa đón</option>
                            <option value="maintenance">Bảo trì</option>
                        </select>
                        <select class="form-select form-select-sm" id="priority-filter">
                            <option value="">Tất cả mức độ</option>
                            <option value="urgent">Khẩn cấp</option>
                            <option value="high">Cao</option>
                            <option value="normal">Bình thường</option>
                            <option value="low">Thấp</option>
                        </select>
                    </div>
                </div>

                <div class="requests-list">
                    <!-- Request Item 1 -->
                    <div class="request-item" data-status="pending" data-category="spa" data-priority="high">
                        <div class="request-info">
                            <div class="request-header">
                                <span class="request-id">#SV2024001</span>
                                <span class="request-category spa">
                                    <i class="fas fa-spa"></i> Spa & Massage
                                </span>
                                <span class="priority-badge high">Cao</span>
                            </div>
                            <h5>Massage thư giãn 90 phút</h5>
                            <div class="request-details">
                                <div class="customer-info">
                                    <i class="fas fa-user"></i>
                                    <strong>Trần Văn Hùng</strong> - Phòng 203
                                </div>
                                <div class="request-time">
                                    <i class="fas fa-clock"></i>
                                    Yêu cầu lúc: 14:30 - Mong muốn: 15:00
                                </div>
                                <div class="request-note">
                                    <i class="fas fa-comment"></i>
                                    Khách yêu cầu massage thư giãn toàn thân, ưu tiên nhân viên nữ
                                </div>
                            </div>
                        </div>
                        <div class="request-actions">
                            <div class="request-price">$80</div>
                            <div class="action-buttons">
                                <button class="btn btn-sm btn-outline-success" title="Chấp nhận">
                                    <i class="fas fa-check"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-info" title="Chi tiết">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-danger" title="Từ chối">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="status-badge pending">Chờ xử lý</div>
                        </div>
                    </div>

                    <!-- Request Item 2 -->
                    <div class="request-item" data-status="in-progress" data-category="restaurant" data-priority="normal">
                        <div class="request-info">
                            <div class="request-header">
                                <span class="request-id">#SV2024002</span>
                                <span class="request-category restaurant">
                                    <i class="fas fa-utensils"></i> Nhà hàng
                                </span>
                                <span class="priority-badge normal">Bình thường</span>
                            </div>
                            <h5>Đặt bàn dinner cho 4 người</h5>
                            <div class="request-details">
                                <div class="customer-info">
                                    <i class="fas fa-user"></i>
                                    <strong>Nguyễn Thị Lan</strong> - Phòng 405
                                </div>
                                <div class="request-time">
                                    <i class="fas fa-clock"></i>
                                    Đã bắt đầu: 19:00 - Dự kiến hoàn thành: 21:00
                                </div>
                                <div class="request-note">
                                    <i class="fas fa-comment"></i>
                                    Bàn gần cửa sổ, có view biển. Khách ăn chay
                                </div>
                            </div>
                        </div>
                        <div class="request-actions">
                            <div class="request-price">$240</div>
                            <div class="action-buttons">
                                <button class="btn btn-sm btn-outline-primary" title="Cập nhật">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-info" title="Chi tiết">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-success" title="Hoàn thành">
                                    <i class="fas fa-check-circle"></i>
                                </button>
                            </div>
                            <div class="status-badge in-progress">Đang thực hiện</div>
                        </div>
                    </div>

                    <!-- Request Item 3 -->
                    <div class="request-item" data-status="pending" data-category="room-service" data-priority="urgent">
                        <div class="request-info">
                            <div class="request-header">
                                <span class="request-id">#SV2024003</span>
                                <span class="request-category room-service">
                                    <i class="fas fa-concierge-bell"></i> Room Service
                                </span>
                                <span class="priority-badge urgent">Khẩn cấp</span>
                            </div>
                            <h5>Giao thức ăn tối tại phòng</h5>
                            <div class="request-details">
                                <div class="customer-info">
                                    <i class="fas fa-user"></i>
                                    <strong>Lê Minh Đức</strong> - Phòng 108
                                </div>
                                <div class="request-time">
                                    <i class="fas fa-clock"></i>
                                    Yêu cầu lúc: 20:15 - Giao ngay
                                </div>
                                <div class="request-note">
                                    <i class="fas fa-comment"></i>
                                    Khách bị ốm, cần giao thức ăn nhẹ. Cháo gà + nước chanh mật ong
                                </div>
                            </div>
                        </div>
                        <div class="request-actions">
                            <div class="request-price">$35</div>
                            <div class="action-buttons">
                                <button class="btn btn-sm btn-success" title="Xử lý ngay">
                                    <i class="fas fa-rocket"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-info" title="Chi tiết">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-warning" title="Liên hệ">
                                    <i class="fas fa-phone"></i>
                                </button>
                            </div>
                            <div class="status-badge pending urgent">Chờ xử lý</div>
                        </div>
                    </div>

                    <!-- Request Item 4 -->
                    <div class="request-item" data-status="completed" data-category="laundry" data-priority="normal">
                        <div class="request-info">
                            <div class="request-header">
                                <span class="request-id">#SV2024004</span>
                                <span class="request-category laundry">
                                    <i class="fas fa-tshirt"></i> Giặt ủi
                                </span>
                                <span class="priority-badge normal">Bình thường</span>
                            </div>
                            <h5>Giặt ủi quần áo express</h5>
                            <div class="request-details">
                                <div class="customer-info">
                                    <i class="fas fa-user"></i>
                                    <strong>Phạm Thị Hoa</strong> - Phòng 302
                                </div>
                                <div class="request-time">
                                    <i class="fas fa-clock"></i>
                                    Hoàn thành lúc: 16:45
                                </div>
                                <div class="request-note">
                                    <i class="fas fa-comment"></i>
                                    3 áo sơ mi + 2 quần tây. Đã giao về phòng
                                </div>
                            </div>
                        </div>
                        <div class="request-actions">
                            <div class="request-price">$25</div>
                            <div class="action-buttons">
                                <button class="btn btn-sm btn-outline-info" title="Chi tiết">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-secondary" title="Hóa đơn">
                                    <i class="fas fa-receipt"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-warning" title="Đánh giá">
                                    <i class="fas fa-star"></i>
                                </button>
                            </div>
                            <div class="status-badge completed">Hoàn thành</div>
                        </div>
                    </div>

                    <!-- Request Item 5 -->
                    <div class="request-item" data-status="in-progress" data-category="transport" data-priority="high">
                        <div class="request-info">
                            <div class="request-header">
                                <span class="request-id">#SV2024005</span>
                                <span class="request-category transport">
                                    <i class="fas fa-car"></i> Đưa đón
                                </span>
                                <span class="priority-badge high">Cao</span>
                            </div>
                            <h5>Đưa ra sân bay</h5>
                            <div class="request-details">
                                <div class="customer-info">
                                    <i class="fas fa-user"></i>
                                    <strong>John Smith</strong> - Phòng 507
                                </div>
                                <div class="request-time">
                                    <i class="fas fa-clock"></i>
                                    Khởi hành: 08:00 ngày mai
                                </div>
                                <div class="request-note">
                                    <i class="fas fa-comment"></i>
                                    Chuyến bay 10:30, cần xe sang. Đã xác nhận lái xe
                                </div>
                            </div>
                        </div>
                        <div class="request-actions">
                            <div class="request-price">$40</div>
                            <div class="action-buttons">
                                <button class="btn btn-sm btn-outline-primary" title="Cập nhật">
                                    <i class="fas fa-route"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-info" title="Chi tiết">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-success" title="Hoàn thành">
                                    <i class="fas fa-check-circle"></i>
                                </button>
                            </div>
                            <div class="status-badge in-progress">Đang thực hiện</div>
                        </div>
                    </div>
                </div>

                <!-- Pagination -->
                <div class="requests-pagination">
                    <div class="pagination-info">
                        Hiển thị 1-5 của 30 yêu cầu
                    </div>
                    <nav>
                        <ul class="pagination pagination-sm">
                            <li class="page-item disabled">
                                <span class="page-link">Trước</span>
                            </li>
                            <li class="page-item active">
                                <span class="page-link">1</span>
                            </li>
                            <li class="page-item">
                                <a class="page-link" href="#">2</a>
                            </li>
                            <li class="page-item">
                                <a class="page-link" href="#">3</a>
                            </li>
                            <li class="page-item">
                                <a class="page-link" href="#">Sau</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </section>

        <!-- Performance Analytics -->
        <section class="performance-section">
            <div class="row">
                <div class="col-md-6">
                    <div class="performance-card">
                        <h5>Hiệu suất theo danh mục</h5>
                        <div class="performance-chart">
                            <div class="chart-item">
                                <div class="chart-label">Spa & Massage</div>
                                <div class="chart-bar">
                                    <div class="chart-fill" style="width: 85%"></div>
                                </div>
                                <div class="chart-value">85%</div>
                            </div>
                            <div class="chart-item">
                                <div class="chart-label">Nhà hàng</div>
                                <div class="chart-bar">
                                    <div class="chart-fill" style="width: 92%"></div>
                                </div>
                                <div class="chart-value">92%</div>
                            </div>
                            <div class="chart-item">
                                <div class="chart-label">Room Service</div>
                                <div class="chart-bar">
                                    <div class="chart-fill" style="width: 78%"></div>
                                </div>
                                <div class="chart-value">78%</div>
                            </div>
                            <div class="chart-item">
                                <div class="chart-label">Giặt ủi</div>
                                <div class="chart-bar">
                                    <div class="chart-fill" style="width: 88%"></div>
                                </div>
                                <div class="chart-value">88%</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="performance-card">
                        <h5>Thời gian xử lý trung bình</h5>
                        <div class="time-stats">
                            <div class="time-stat">
                                <div class="time-icon">
                                    <i class="fas fa-spa"></i>
                                </div>
                                <div class="time-info">
                                    <h6>Spa & Massage</h6>
                                    <p>25 phút</p>
                                </div>
                            </div>
                            <div class="time-stat">
                                <div class="time-icon">
                                    <i class="fas fa-utensils"></i>
                                </div>
                                <div class="time-info">
                                    <h6>Nhà hàng</h6>
                                    <p>35 phút</p>
                                </div>
                            </div>
                            <div class="time-stat">
                                <div class="time-icon">
                                    <i class="fas fa-concierge-bell"></i>
                                </div>
                                <div class="time-info">
                                    <h6>Room Service</h6>
                                    <p>18 phút</p>
                                </div>
                            </div>
                            <div class="time-stat">
                                <div class="time-icon">
                                    <i class="fas fa-tshirt"></i>
                                </div>
                                <div class="time-info">
                                    <h6>Giặt ủi</h6>
                                    <p>120 phút</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
</div>

<!-- New Service Request Modal -->
<div class="modal fade" id="newServiceRequestModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Tạo yêu cầu dịch vụ mới</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="new-service-request-form">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Khách hàng *</label>
                                <select class="form-select" name="customer" required>
                                    <option value="">Chọn khách hàng</option>
                                    <option value="203">Trần Văn Hùng - Phòng 203</option>
                                    <option value="405">Nguyễn Thị Lan - Phòng 405</option>
                                    <option value="108">Lê Minh Đức - Phòng 108</option>
                                    <option value="302">Phạm Thị Hoa - Phòng 302</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Danh mục dịch vụ *</label>
                                <select class="form-select" name="category" required>
                                    <option value="">Chọn danh mục</option>
                                    <option value="spa">Spa & Massage</option>
                                    <option value="restaurant">Nhà hàng</option>
                                    <option value="room-service">Room Service</option>
                                    <option value="laundry">Giặt ủi</option>
                                    <option value="transport">Đưa đón</option>
                                    <option value="maintenance">Bảo trì</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Mức độ ưu tiên</label>
                                <select class="form-select" name="priority">
                                    <option value="normal">Bình thường</option>
                                    <option value="high">Cao</option>
                                    <option value="urgent">Khẩn cấp</option>
                                    <option value="low">Thấp</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Tên dịch vụ *</label>
                                <input type="text" class="form-control" name="service_name" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Giá dịch vụ ($)</label>
                                <input type="number" class="form-control" name="price" min="0" step="0.01">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Thời gian mong muốn</label>
                                <input type="datetime-local" class="form-control" name="desired_time">
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Mô tả chi tiết</label>
                        <textarea class="form-control" name="description" rows="3"
                                  placeholder="Mô tả chi tiết về yêu cầu dịch vụ..."></textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Ghi chú đặc biệt</label>
                        <textarea class="form-control" name="notes" rows="2"
                                  placeholder="Các yêu cầu đặc biệt của khách hàng..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                <button type="button" class="btn btn-primary" id="create-service-request-btn">Tạo yêu cầu</button>
            </div>
        </div>
    </div>
</div>

<!-- Service Detail Modal -->
<div class="modal fade" id="serviceDetailModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Chi tiết yêu cầu dịch vụ</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body" id="serviceDetailContent">
                <!-- Content will be loaded dynamically -->
            </div>
        </div>
    </div>
</div>

