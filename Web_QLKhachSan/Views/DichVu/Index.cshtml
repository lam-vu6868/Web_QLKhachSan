@model IEnumerable<Web_QLKhachSan.Models.LoaiDichVu>

@{
    ViewBag.Title = "Dịch Vụ";
}
<link rel="stylesheet" href="~/assets/css/dich-vu.css" />

<section class="page-header">
      <div class="floating-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
      </div>
      <div class="container">
        <div class="header-content">
          <div class="header-icon" data-aos="zoom-in">
            <i class="fas fa-concierge-bell"></i>
          </div>
          <h1 class="text-center" data-aos="fade-up">Thế Giới Dịch Vụ Đẳng Cấp</h1>
          <p class="text-center" data-aos="fade-up" data-aos-delay="100">
            Tận hưởng những trải nghiệm tiện nghi và đẳng cấp nhất tại Serene Horizon
          </p>
          <div class="header-stats" data-aos="fade-up" data-aos-delay="200">
            <div class="stat-box">
              <i class="fas fa-spa"></i>
              <div>
                <strong>10+</strong>
                <span>Dịch vụ cao cấp</span>
              </div>
            </div>
            <div class="stat-box">
              <i class="fas fa-star"></i>
              <div>
                <strong>5 Sao</strong>
                <span>Đánh giá</span>
              </div>
            </div>
            <div class="stat-box">
              <i class="fas fa-clock"></i>
              <div>
                <strong>24/7</strong>
                <span>Phục vụ</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <main class="main-content-area">
      <!-- Services Grid Overview -->
      <section class="services-grid-section">
        <div class="container">
          <div class="services-accordion">
            @if (Model != null && Model.Any())
            {
                foreach (var loaiDichVu in Model)
                {
                    var categoryId = "category-" + loaiDichVu.LoaiDichVuId;
                    var dichVus = loaiDichVu.DichVus.Where(d => d.DaHoatDong).ToList();
                    
                    if (dichVus.Any())
                    {
                        <div class="service-category" data-category="@loaiDichVu.MaLoai">
                          <div class="category-header" onclick="toggleServiceCategory('@categoryId')">
                            <div class="category-image">
                              @{
                                  var iconLoai = !string.IsNullOrEmpty(loaiDichVu.Icon) ? loaiDichVu.Icon : "fas fa-concierge-bell";
                                  var hinhAnh = loaiDichVu.HinhAnh;
                                  var imgSrc = !string.IsNullOrEmpty(hinhAnh) ? hinhAnh : "https://images.unsplash.com/photo-1566073771259-6a8506099945?w=800&q=80";
                              }
                              <img src="@imgSrc" alt="@loaiDichVu.TenLoai" onerror="this.src='https://images.unsplash.com/photo-1566073771259-6a8506099945?w=800&q=80'">
                              <div class="category-overlay">
                                <i class="@iconLoai"></i>
                              </div>
                            </div>
                            <div class="category-info">
                              <h3>@loaiDichVu.TenLoai</h3>
                              <p>@(loaiDichVu.MoTa ?? "Dịch vụ chất lượng cao")</p>
                              @{
                                  var minPrice = dichVus.Where(d => d.Gia.HasValue).Min(d => d.Gia);
                                  if (minPrice.HasValue)
                                  {
                                      <div class="category-price">
                                        <span class="price-from">Từ</span>
                                        <span class="price-amount">@minPrice.Value.ToString("N0")₫</span>
                                      </div>
                                  }
                              }
                            </div>
                            <div class="expand-icon">
                              <i class="fas fa-chevron-down"></i>
                            </div>
                          </div>
                          <div class="category-content" id="@categoryId">
                            <div class="service-items">
                              @foreach (var dichVu in dichVus)
                              {
                                  <div class="service-item">
                                    <div class="item-icon">
                                      @{
                                          var iconClass = !string.IsNullOrEmpty(dichVu.Icon) ? dichVu.Icon : "fas fa-star";
                                      }
                                      <i class="@iconClass"></i>
                                    </div>
                                    <div class="item-details">
                                      <h4>@dichVu.TenDichVu</h4>
                                      <p>@(dichVu.MoTa ?? "Dịch vụ chất lượng cao")</p>
                                      @if (dichVu.Gia.HasValue)
                                      {
                                          if (dichVu.GiaUuDai.HasValue && dichVu.GiaUuDai < dichVu.Gia)
                                          {
                                              <div class="item-price">
                                                <span class="old-price">@dichVu.Gia.Value.ToString("N0")₫</span>
                                                <span class="sale-price">@dichVu.GiaUuDai.Value.ToString("N0")₫</span>
                                              </div>
                                          }
                                          else
                                          {
                                              <div class="item-price">@dichVu.Gia.Value.ToString("N0")₫</div>
                                          }
                                      }
                                    </div>
                                  </div>
                              }
                            </div>
                          </div>
                        </div>
                    }
                }
            }
            else
            {
                <div class="no-services">
                    <i class="fas fa-inbox"></i>
                    <p>Hiện tại chưa có dịch vụ nào</p>
                </div>
            }
          </div>
        </div>
      </section>

      <!-- CTA Section -->
      <section class="concluding-cta">
        <div class="cta-bg-overlay"></div>
        <div class="container">
          <div class="cta-content" data-aos="fade-up">
            <div class="cta-icon">
              <i class="fas fa-concierge-bell"></i>
            </div>
            <h2>Tận Hưởng Đầy Đủ Tiện Ích Cao Cấp</h2>
            <p>
              SPA thư giãn, ẩm thực 5 sao, dịch vụ giặt là và vận chuyển tiện lợi. 
              Liên hệ ngay để được phục vụ với chất lượng tốt nhất.
            </p>
            <div class="cta-buttons">
              <a href="@Url.Action("Index", "DatDichVu")" class="cta-button cta-primary">
                <i class="fas fa-calendar-check"></i> Đặt Dịch Vụ Ngay
              </a>
              <a href="tel:0287123456" class="cta-button cta-secondary">
                <i class="fas fa-phone-alt"></i> Gọi: 0287 123 4567
              </a>
            </div>
            <div class="cta-features">
              <div class="cta-feature">
                <i class="fas fa-percent"></i>
                <span>Ưu đãi 20%<br/>Khách hàng mới</span>
              </div>
              <div class="cta-feature">
                <i class="fas fa-gift"></i>
                <span>Tặng voucher<br/>Dịch vụ spa</span>
              </div>
              <div class="cta-feature">
                <i class="fas fa-headset"></i>
                <span>Hỗ trợ 24/7<br/>Mọi lúc mọi nơi</span>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
   </section>
<script src="~/assets/js/dich-vu.js"></script>