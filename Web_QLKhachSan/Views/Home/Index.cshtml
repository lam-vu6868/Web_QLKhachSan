@model Web_QLKhachSan.Models.HomeIndexViewModel
@{
    ViewBag.Title = "Home Page";
}
<link rel="stylesheet" href="~/assets/css/index.css" />
<section class="hero-section">
    <!-- Floating Shapes Background -->
    <div class="hero-floating-shapes">
        <div class="hero-shape hero-shape-1"></div>
        <div class="hero-shape hero-shape-2"></div>
        <div class="hero-shape hero-shape-3"></div>
    </div>

    <!-- Simple Background Slideshow -->
    <div class="hero-slideshow">
        <div class="slide active"></div>
        <div class="slide"></div>
        <div class="slide"></div>
        <div class="slide"></div>
    </div>

    <!-- Simple Controls -->
    <div class="slideshow-nav">
        <span class="dot active" data-slide="0"></span>
        <span class="dot" data-slide="1"></span>
        <span class="dot" data-slide="2"></span>
        <span class="dot" data-slide="3"></span>
    </div>

    <div class="hero-content">
        <div class="hero-badge" data-aos="zoom-in" data-aos-delay="100">
            <i class="fas fa-award"></i>
            <span>Resort 5 Sao Hàng Đầu</span>
        </div>
        <h1 data-aos="fade-left">Nơi Sự An Yên Chạm Đến Chân Trời</h1>
        <p data-aos="fade-right">
            Trải nghiệm sự sang trọng tinh tế và dịch vụ đẳng cấp tại The Serene
            Horizon.
        </p>

        <!-- Hero Stats -->
        <div class="hero-stats" data-aos="fade-up" data-aos-delay="600">
            <div class="hero-stat-item">
                <i class="fas fa-hotel"></i>
                <div class="hero-stat-content">
                    <span class="hero-stat-number">@(ViewBag.TotalRooms ?? 0)+</span>
                    <span class="hero-stat-label">Phòng Luxury</span>
                </div>
            </div>
            <div class="hero-stat-item">
                <i class="fas fa-star"></i>
                <div class="hero-stat-content">
                    <span class="hero-stat-number">@(ViewBag.AverageRating ?? 0)</span>
                    <span class="hero-stat-label">Đánh Giá</span>
                </div>
            </div>
            <div class="hero-stat-item">
                <i class="fas fa-users"></i>
                <div class="hero-stat-content">
                    <span class="hero-stat-number">@(ViewBag.TotalCustomers ?? 0)+</span>
                    <span class="hero-stat-label">Khách Hài Lòng</span>
                </div>
            </div>
        </div>

        <!-- Hero Search Bar -->
        <div class="hero-search-container" data-aos="fade-up" data-aos-delay="600">
            <div class="hero-search-box">
                @using (Html.BeginForm("SearchRooms", "Home", FormMethod.Post, new { @class = "search-form-compact" }))
                {
                    @Html.AntiForgeryToken()
                    
                    <div class="search-fields-row">
                        <div class="search-field-compact">
                            <label><i class="fas fa-calendar-alt"></i> Check-in</label>
                            <input type="date" 
                                   name="checkInDate" 
                                   id="checkin-date" 
                                   class="search-input-compact"
                                   value="@DateTime.Now.ToString("yyyy-MM-dd")"
                                   min="@DateTime.Now.ToString("yyyy-MM-dd")" />
                        </div>
                        
                        <div class="search-field-compact">
                            <label><i class="fas fa-calendar-check"></i> Check-out</label>
                            <input type="date" 
                                   name="checkOutDate" 
                                   id="checkout-date" 
                                   class="search-input-compact"
                                   value="@DateTime.Now.AddDays(1).ToString("yyyy-MM-dd")"
                                   min="@DateTime.Now.AddDays(1).ToString("yyyy-MM-dd")" />
                        </div>
                        
                        <div class="search-field-compact">
                            <label><i class="fas fa-users"></i> Khách</label>
                            <select name="guestCount" id="guest-count" class="search-input-compact">
                                <option value="" selected>Chọn số khách</option>
                                <option value="1">1 khách</option>
                                <option value="2">2 khách</option>
                                <option value="3">3 khách</option>
                                <option value="4">4 khách</option>
                            </select>
                        </div>
                        
                        <div class="search-field-compact">
                            <label><i class="fas fa-bed"></i> Loại phòng</label>
                            <select name="roomTypeId" id="room-type" class="search-input-compact">
                                <option value="">Chọn loại phòng</option>
                                @foreach (var loaiPhong in Model.SearchModel.RoomTypes)
                                {
                                    <option value="@loaiPhong.LoaiPhongId">@loaiPhong.TenLoai</option>
                                }
                            </select>
                        </div>
                        
                        <div class="search-action-compact">
                            <button type="submit" class="search-btn-compact" id="search-rooms">
                                <i class="fas fa-search"></i>
                                <span>Tìm Kiếm</span>
                            </button>
                        </div>
                    </div>
                }
            </div>
        </div>

        <!-- Hero CTA Buttons -->
        <div class="hero-cta-buttons" data-aos="fade-up" data-aos-delay="800">
            <a href="@Url.Action("Index", "PhongNghi")" class="hero-btn hero-btn-primary">
                <i class="fas fa-calendar-check"></i>
                Đặt Phòng Ngay
            </a>
            <a href="@Url.Action("Index", "GioiThieu")" class="hero-btn hero-btn-secondary">
                <i class="fas fa-play-circle"></i>
                Khám Phá Thêm
            </a>
        </div>
    </div>

    <!-- Scroll Indicator -->
    <div class="scroll-indicator" data-aos="fade-up" data-aos-delay="1000">
        <div class="scroll-mouse">
            <div class="scroll-wheel"></div>
        </div>
        <span>Cuộn xuống để khám phá</span>
    </div>
</section>

<section class="intro-section">
    <div class="container intro-layout">
        <div class="intro-images" data-aos="fade-right">
            <div class="intro-image-wrapper intro-image-main">
                <img src="https://images.unsplash.com/photo-1596394516093-501ba68a0ba6?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1738&q=80"
                     alt="Sảnh khách sạn"
                     class="intro-img-1 w-100" />
                <div class="intro-image-badge">
                    <i class="fas fa-certificate"></i>
                    <span>Thiết Kế Đẳng Cấp</span>
                </div>
            </div>
            <div class="intro-decoration-shape"></div>
        </div>
        <div class="intro-text" data-aos="fade-left">
            <div class="intro-label">
                <i class="fas fa-crown"></i>
                <span>VỀ CHÚNG TÔI</span>
            </div>
            <h2 class="section-heading">Triết Lý Của Sự Tận Tâm</h2>
            <p>
                Tại The Serene Horizon, chúng tôi tin rằng sự sang trọng không chỉ
                đến từ những tiện nghi xa hoa, mà còn từ sự quan tâm chân thành
                đến từng chi tiết trong trải nghiệm của bạn. Mỗi không gian đều
                được thiết kế để mang lại cảm giác thư thái và bình yên tuyệt đối.
            </p>
            <div class="intro-features">
                <div class="intro-feature-item">
                    <i class="fas fa-check-circle"></i>
                    <span>Dịch vụ 24/7</span>
                </div>
                <div class="intro-feature-item">
                    <i class="fas fa-check-circle"></i>
                    <span>Thiết kế sang trọng</span>
                </div>
                <div class="intro-feature-item">
                    <i class="fas fa-check-circle"></i>
                    <span>Đội ngũ chuyên nghiệp</span>
                </div>
            </div>
            <a href="@Url.Action("Index", "TimHieuThem")" class="cta-button-modern mt-4">
                <span>Tìm Hiểu Thêm</span>
                <i class="fas fa-arrow-right"></i>
            </a>
        </div>
    </div>
</section>

<section class="rooms-section">
    <div class="container">
        <div class="section-header" data-aos="fade-up">
            <span class="section-label">
                <i class="fas fa-bed"></i>
                PHÒNG NGHỈ
            </span>
            <h2 class="section-heading text-center">Các Loại Phòng Nổi Bật</h2>
            <p class="section-subtitle">Lựa chọn hoàn hảo cho mọi nhu cầu của bạn</p>
        </div>
        <div class="rooms-grid">
            @* 1. PHÒNG PHỔ BIẾN - Được đặt nhiều nhất *@
            @if (ViewBag.PhongPhoBien != null)
            {
                var phongPhoBien = (Web_QLKhachSan.Models.Phong)ViewBag.PhongPhoBien;
                var hinhAnh = !string.IsNullOrEmpty(phongPhoBien.HinhAnhThumb) 
                    ? phongPhoBien.HinhAnhThumb 
                    : "https://images.unsplash.com/photo-1611892440504-42a792e24d32?auto=format&fit=crop&w=1740&q=80";
                
                <div class="room-card-modern" data-aos="fade-up" data-aos-delay="100">
                    <div class="room-card-image">
                        <img src="@hinhAnh" alt="@phongPhoBien.TenPhong" />
                        <div class="room-overlay"></div>
                        <div class="room-badge room-badge-popular">
                            <i class="fas fa-fire"></i>
                            <span>Phổ Biến</span>
                        </div>
                        <a href="@Url.Action("Index", "ChiTietPhong", new { id = phongPhoBien.PhongId })" class="room-quick-view">
                            <i class="fas fa-eye"></i>
                            <span>Xem nhanh</span>
                        </a>
                    </div>
                    <div class="room-card-content">
                        <div class="room-header">
                            <h3>@phongPhoBien.TenPhong</h3>
                        </div>
                        <div class="amenities">
                            <span><i class="fas fa-bed"></i> @phongPhoBien.LoaiPhong.TenLoai</span>
                            @if (phongPhoBien.LoaiPhong.SoNguoiToiDa.HasValue)
                            {
                                <span><i class="fas fa-users"></i> @phongPhoBien.LoaiPhong.SoNguoiToiDa người</span>
                            }
                            @if (phongPhoBien.LoaiPhong.DienTich.HasValue)
                            {
                                <span><i class="fas fa-ruler-combined"></i> @phongPhoBien.LoaiPhong.DienTich m²</span>
                            }
                        </div>
                        <p class="room-description">@(phongPhoBien.LoaiPhong.MoTa ?? "Phòng được đặt nhiều nhất")</p>
                        <div class="room-footer">
                            <p class="price">Từ <strong>@((phongPhoBien.Gia ?? phongPhoBien.LoaiPhong.GiaCoBan ?? 0).ToString("N0"))đ</strong> <span>/đêm</span></p>
                        </div>
                    </div>
                </div>
            }

            @* 2. PHÒNG CAO CẤP - Giá cao nhất *@
            @if (ViewBag.PhongCaoCap != null)
            {
                var phongCaoCap = (Web_QLKhachSan.Models.Phong)ViewBag.PhongCaoCap;
                var hinhAnh = !string.IsNullOrEmpty(phongCaoCap.HinhAnhThumb) 
                    ? phongCaoCap.HinhAnhThumb 
                    : "https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?auto=format&fit=crop&w=1740&q=80";
                
                <div class="room-card-modern" data-aos="fade-up" data-aos-delay="200">
                    <div class="room-card-image">
                        <img src="@hinhAnh" alt="@phongCaoCap.TenPhong" />
                        <div class="room-overlay"></div>
                        <div class="room-badge room-badge-luxury">
                            <i class="fas fa-gem"></i>
                            <span>Cao Cấp</span>
                        </div>
                        <a href="@Url.Action("Index", "ChiTietPhong", new { id = phongCaoCap.PhongId })" class="room-quick-view">
                            <i class="fas fa-eye"></i>
                            <span>Xem nhanh</span>
                        </a>
                    </div>
                    <div class="room-card-content">
                        <div class="room-header">
                            <h3>@phongCaoCap.TenPhong</h3>
                        </div>
                        <div class="amenities">
                            <span><i class="fas fa-bed"></i> @phongCaoCap.LoaiPhong.TenLoai</span>
                            @if (phongCaoCap.LoaiPhong.SoNguoiToiDa.HasValue)
                            {
                                <span><i class="fas fa-users"></i> @phongCaoCap.LoaiPhong.SoNguoiToiDa người</span>
                            }
                            @if (phongCaoCap.LoaiPhong.DienTich.HasValue)
                            {
                                <span><i class="fas fa-ruler-combined"></i> @phongCaoCap.LoaiPhong.DienTich m²</span>
                            }
                        </div>
                        <p class="room-description">@(phongCaoCap.LoaiPhong.MoTa ?? "Phòng cao cấp nhất của khách sạn")</p>
                        <div class="room-footer">
                            <p class="price">Từ <strong>@((phongCaoCap.Gia ?? phongCaoCap.LoaiPhong.GiaCoBan ?? 0).ToString("N0"))đ</strong> <span>/đêm</span></p>
                        </div>
                    </div>
                </div>
            }

            @* 3. PHÒNG GIA ĐÌNH - Chứa nhiều người nhất *@
            @if (ViewBag.PhongGiaDinh != null)
            {
                var phongGiaDinh = (Web_QLKhachSan.Models.Phong)ViewBag.PhongGiaDinh;
                var hinhAnh = !string.IsNullOrEmpty(phongGiaDinh.HinhAnhThumb) 
                    ? phongGiaDinh.HinhAnhThumb 
                    : "https://images.unsplash.com/photo-1631049307264-da0ec9d70304?auto=format&fit=crop&w=1740&q=80";
                
                <div class="room-card-modern" data-aos="fade-up" data-aos-delay="300">
                    <div class="room-card-image">
                        <img src="@hinhAnh" alt="@phongGiaDinh.TenPhong" />
                        <div class="room-overlay"></div>
                        <div class="room-badge room-badge-new">
                            <i class="fas fa-users"></i>
                            <span>Gia Đình</span>
                        </div>
                        <a href="@Url.Action("Index", "ChiTietPhong", new { id = phongGiaDinh.PhongId })" class="room-quick-view">
                            <i class="fas fa-eye"></i>
                            <span>Xem nhanh</span>
                        </a>
                    </div>
                    <div class="room-card-content">
                        <div class="room-header">
                            <h3>@phongGiaDinh.TenPhong</h3>
                        </div>
                        <div class="amenities">
                            <span><i class="fas fa-bed"></i> @phongGiaDinh.LoaiPhong.TenLoai</span>
                            @if (phongGiaDinh.LoaiPhong.SoNguoiToiDa.HasValue)
                            {
                                <span><i class="fas fa-users"></i> @phongGiaDinh.LoaiPhong.SoNguoiToiDa người</span>
                            }
                            @if (phongGiaDinh.LoaiPhong.DienTich.HasValue)
                            {
                                <span><i class="fas fa-ruler-combined"></i> @phongGiaDinh.LoaiPhong.DienTich m²</span>
                            }
                        </div>
                        <p class="room-description">@(phongGiaDinh.LoaiPhong.MoTa ?? "Phòng rộng rãi cho cả gia đình")</p>
                        <div class="room-footer">
                            <p class="price">Từ <strong>@((phongGiaDinh.Gia ?? phongGiaDinh.LoaiPhong.GiaCoBan ?? 0).ToString("N0"))đ</strong> <span>/đêm</span></p>
                        </div>
                    </div>
                </div>
            }

        </div>
        <div class="section-cta" data-aos="fade-up" data-aos-delay="500">
            <a href="@Url.Action("Index", "PhongNghi")" class="view-all-btn">
                <span>Xem Tất Cả Phòng</span>
                <i class="fas fa-long-arrow-alt-right"></i>
            </a>
        </div>
    </div>
</section>

<section class="services-section-modern">
    <div class="container">
        <div class="section-header" data-aos="fade-up">
            <span class="section-label">
                <i class="fas fa-concierge-bell"></i>
                DỊCH VỤ & TIỆN ÍCH
            </span>
            <h2 class="section-heading text-center">Dịch Vụ & Tiện Ích</h2>
            <p class="section-subtitle">Trải nghiệm đẳng cấp 5 sao với đa dạng tiện ích</p>
        </div>
        <div class="services-grid-modern">
            @if (Model.LoaiDichVus != null && Model.LoaiDichVus.Any())
            {
                int delayIndex = 1;
                foreach (var loaiDichVu in Model.LoaiDichVus)
                {
                    var serviceImage = !string.IsNullOrEmpty(loaiDichVu.HinhAnh)
                        ? loaiDichVu.HinhAnh
                        : "https://images.unsplash.com/photo-1566073771259-6a8506099945?auto=format&fit=crop&w=1740&q=80";
                    var serviceIcon = !string.IsNullOrEmpty(loaiDichVu.Icon)
                        ? loaiDichVu.Icon
                        : "fas fa-concierge-bell";
                    var serviceSlogan = !string.IsNullOrEmpty(loaiDichVu.Slogan)
                        ? loaiDichVu.Slogan
                        : "Trải nghiệm dịch vụ đẳng cấp";
                    
                    // Lấy 3 dịch vụ đầu tiên của loại này
                    var topDichVus = loaiDichVu.DichVus
                        .Where(d => d.DaHoatDong)
                        .Take(3)
                        .ToList();

                    <div class="service-item-modern" data-aos="fade-up" data-aos-delay="@(delayIndex * 100)">
                        <div class="service-bg" style="background-image: url('@serviceImage');"></div>
                        <div class="service-gradient"></div>
                        <div class="service-icon">
                            <i class="@serviceIcon"></i>
                        </div>
                        <div class="service-content">
                            <h3>@loaiDichVu.TenLoai</h3>
                            <p>@serviceSlogan</p>
                            <ul class="service-features">
                                @if (topDichVus.Any())
                                {
                                    foreach (var dichVu in topDichVus)
                                    {
                                        <li><i class="fas fa-check"></i> @dichVu.TenDichVu</li>
                                    }
                                }
                                else
                                {
                                    <li><i class="fas fa-check"></i> Dịch vụ chuyên nghiệp</li>
                                    <li><i class="fas fa-check"></i> Chất lượng đảm bảo</li>
                                    <li><i class="fas fa-check"></i> Phục vụ tận tình</li>
                                }
                            </ul>
                            <a href="@Url.Action("Index", "DichVu")" class="service-link">
                                <span>Khám Phá</span>
                                <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                    
                    delayIndex++;
                }
            }
            else
            {
                @* Fallback nếu không có dữ liệu *@
                <div class="service-item-modern" data-aos="fade-up" data-aos-delay="100">
                    <div class="service-bg" style="background-image: url('https://images.unsplash.com/photo-1544148103-0773bf10d330?auto=format&fit=crop&w=1740&q=80');"></div>
                    <div class="service-gradient"></div>
                    <div class="service-icon">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <div class="service-content">
                        <h3>Nhà Hàng</h3>
                        <p>Khám phá ẩm thực tinh hoa</p>
                        <ul class="service-features">
                            <li><i class="fas fa-check"></i> Ẩm thực 5 sao</li>
                            <li><i class="fas fa-check"></i> Đầu bếp chuyên nghiệp</li>
                            <li><i class="fas fa-check"></i> Phục vụ 24/7</li>
                        </ul>
                        <a href="@Url.Action("Index", "DichVu")" class="service-link">
                            <span>Khám Phá</span>
                            <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<section class="hotel-intro-section">
    <div class="container">
        <h2 class="section-heading text-center">
            Giới Thiệu Về Khách Sạn The Serene Horizon
        </h2>
        <div class="gallery-container">
            <div class="main-image">
                <img src="https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80"
                     alt="Khách sạn The Serene Horizon"
                     decoding="async" />
            </div>
            <div class="gallery-grid">
                <img src="~/assets/imgs/gt1.jpg"
                     alt="Phòng tập"
                     decoding="async" />
                <img src="~/assets/imgs/gt2.jpg"
                     alt="Đội ngũ nhân viên"
                     decoding="async" />
                <img src="~/assets/imgs/gt3.jpg"
                     alt="Thiết bị hiện đại"
                     decoding="async" />
                <img src="~/assets/imgs/gt4.jpg"
                     alt="Không gian phòng tập"
                     decoding="async" />
                <img src="~/assets/imgs/gt5.jpg"
                     alt="Hoạt động tập luyện"
                     decoding="async" />
                <img src="~/assets/imgs/gt6.jpg"
                     alt="Phòng nghỉ"
                     decoding="async" />
            </div>
        </div>
    </div>
</section>

<section class="brand-partners">
    <div class="container">
        <h2 class="section-heading text-center">HỢP TÁC THƯƠNG HIỆU</h2>
        <div class="partners-grid">
            <div class="partner-item">
                <img src="https://1000logos.net/wp-content/uploads/2021/11/Nike-Logo-tumb.jpg"
                     alt="Nike Logo" />
                <div class="partner-overlay">
                    <h3>Nike</h3>
                    <p>Đối tác cung cấp trang thiết bị thể thao</p>
                </div>
            </div>
            <div class="partner-item">
                <img src="https://1000logos.net/wp-content/uploads/2016/10/Adidas-Logo-768x432.png"
                     alt="Adidas Logo" />
                <div class="partner-overlay">
                    <h3>Adidas</h3>
                    <p>Đối tác về trang phục và dụng cụ tập luyện</p>
                </div>
            </div>
            <div class="partner-item">
                <img src="https://1000logos.net/wp-content/uploads/2017/05/Reebok-logo.png"
                     alt="Reebok Logo" />
                <div class="partner-overlay">
                    <h3>Reebok</h3>
                    <p>Cung cấp giày và phụ kiện thể thao</p>
                </div>
            </div>
            <div class="partner-item">
                <img src="https://1000logos.net/wp-content/uploads/2021/04/Under-Armour-logo-768x484.png"
                     alt="Under Armour Logo" />
                <div class="partner-overlay">
                    <h3>Under Armour</h3>
                    <p>Đối tác về công nghệ trang phục thể thao</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="reviews-section">
    <div class="container">
        <h2 class="section-heading text-center">ĐÁNH GIÁ VÀ NHẬN XÉT</h2>
        <div class="reviews-container">
            <button class="nav-btn prev-btn">
                <i class="fas fa-chevron-left"></i>
            </button>

            <div class="reviews-slider">
                @if (ViewBag.DanhGias != null && ((List<Web_QLKhachSan.Models.DanhGia>)ViewBag.DanhGias).Any())
                {
                    foreach (var danhGia in (List<Web_QLKhachSan.Models.DanhGia>)ViewBag.DanhGias)
                    {
                        var khachHang = danhGia.KhachHang;
                        var avatarUrl = string.IsNullOrEmpty(khachHang.AnhDaiDienUrl)
                            ? "https://www.gravatar.com/avatar/?d=mp&s=150"
                            : khachHang.AnhDaiDienUrl;
                        var ngayDanhGia = (DateTime.Now - danhGia.NgayTao).Days;
                        var timeAgo = ngayDanhGia == 0 ? "Hôm nay" :
                                      ngayDanhGia == 1 ? "Hôm qua" :
                                      ngayDanhGia < 7 ? ngayDanhGia + " ngày trước" :
                                      ngayDanhGia < 30 ? (ngayDanhGia / 7) + " tuần trước" :
                                      (ngayDanhGia / 30) + " tháng trước";

                        var hinhAnhs = danhGia.DanhGiaHinhAnhs.ToList();
                        var totalImages = hinhAnhs.Count;
                        var tenPhong = danhGia.Phong != null ? danhGia.Phong.TenPhong : "Phòng nghỉ";

                        <div class="review-card">
                            <div class="review-badge">@tenPhong</div>
                            <div class="review-header">
                                <div class="reviewer-info">
                                    <img src="@avatarUrl"
                                         alt="@khachHang.HoVaTen"
                                         class="reviewer-avatar" />
                                    <div class="reviewer-details">
                                        <h3>@khachHang.HoVaTen</h3>
                                        <div class="rating">
                                            @for (int i = 1; i <= 5; i++)
                                            {
                                                if (i <= danhGia.Diem)
                                                {
                                                    <i class="fas fa-star"></i>
                                                }
                                                else
                                                {
                                                    <i class="far fa-star"></i>
                                                }
                                            }
                                        </div>
                                        <span class="review-date">@danhGia.NgayTao.ToString("dd/MM/yyyy")</span>
                                    </div>
                                </div>
                            </div>
                            <p class="review-text">
                                "@danhGia.BinhLuan"
                            </p>
                            @if (totalImages > 0)
                            {
                                <div class="review-photos" data-review-id="@danhGia.DanhGiaId">
                                    @* Hiển thị ảnh đầu tiên *@
                                    <img src="@hinhAnhs[0].DuongDanAnh" alt="Review photo" />

                                    @* Nếu có ảnh thứ 2 *@
                                    @if (totalImages > 1)
                                    {
                                        if (totalImages == 2)
                                        {
                                            <img src="@hinhAnhs[1].DuongDanAnh" alt="Review photo" />
                                        }
                                        else
                                        {
                                            <div class="review-photo-more" onclick="showAllPhotos(@danhGia.DanhGiaId)">
                                                <img src="@hinhAnhs[1].DuongDanAnh" alt="Review photo" />
                                                <div class="photo-overlay">
                                                    <span>+@(totalImages - 2)</span>
                                                </div>
                                            </div>
                                        }
                                    }

                                    @* Lưu tất cả ảnh vào data attribute *@
                                    <div class="all-photos" style="display: none;">
                                        @foreach (var img in hinhAnhs)
                                        {
                                            <img src="@img.DuongDanAnh" alt="Review photo" />
                                        }
                                    </div>
                                </div>
                            }
                        </div>
                    }
                }
                else
                {
                    @* Hiển thị fallback nếu không có đánh giá *@
                    <div class="review-card">
                        <div class="review-badge">Verified Member</div>
                        <div class="review-header">
                            <div class="reviewer-info">
                                <img src="https://randomuser.me/api/portraits/women/44.jpg"
                                     alt="Reviewer"
                                     class="reviewer-avatar" />
                                <div class="reviewer-details">
                                    <h3>Khách hàng mẫu</h3>
                                    <div class="rating">
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                        <i class="fas fa-star"></i>
                                    </div>
                                    <span class="review-date">@DateTime.Now.ToString("dd/MM/yyyy")</span>
                                </div>
                            </div>
                        </div>
                        <p class="review-text">
                            "Chưa có đánh giá nào. Hãy là người đầu tiên đánh giá dịch vụ của chúng tôi!"
                        </p>
                    </div>
                }
            </div>

            <button class="nav-btn next-btn">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
        <div class="slider-dots"></div>
    </div>
</section>

<!-- Modal hiển thị tất cả ảnh -->
<div id="photoModal" class="photo-modal" style="display: none;">
    <div class="photo-modal-overlay" onclick="closePhotoModal()"></div>
    <div class="photo-modal-content">
        <button class="photo-modal-close" onclick="closePhotoModal()">
            <i class="fas fa-times"></i>
        </button>
        <div class="photo-modal-images" id="modalPhotos"></div>
    </div>
</div>

<section class="cta-section">
    <div class="cta-overlay">
        <div class="container text-center">
            <h2>Trải Nghiệm Kỳ Nghỉ Trong Mơ Của Bạn</h2>
            <p>Những khoảnh khắc đang chờ đón. Hãy đặt phòng ngay hôm nay.</p>
            <a href="@Url.Action("Index", "PhongNghi")" class="cta-button-large">Đặt Phòng Ngay</a>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        $(document).ready(function() {
            // Set default values
            var today = new Date();
            var tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            var todayStr = today.toISOString().split('T')[0];
            var tomorrowStr = tomorrow.toISOString().split('T')[0];
            
            // Set minimum dates
            $('#checkin-date').attr('min', todayStr);
            $('#checkout-date').attr('min', tomorrowStr);
            
            // Update checkout minimum when checkin changes
            $('#checkin-date').on('change', function() {
                var checkinDate = new Date($(this).val());
                var nextDay = new Date(checkinDate);
                nextDay.setDate(nextDay.getDate() + 1);
                
                var nextDayStr = nextDay.toISOString().split('T')[0];
                $('#checkout-date').attr('min', nextDayStr);
                
                // If checkout is before or equal to checkin, update it
                if ($('#checkout-date').val() <= $(this).val()) {
                    $('#checkout-date').val(nextDayStr);
                }
            });
            
            // Validate form submission
            $('form').on('submit', function(e) {
                var checkin = $('#checkin-date').val();
                var checkout = $('#checkout-date').val();
                
                if (!checkin || !checkout) {
                    e.preventDefault();
                    alert('Vui lòng chọn ngày nhận và trả phòng!');
                    return false;
                }
                
                if (new Date(checkout) <= new Date(checkin)) {
                    e.preventDefault();
                    alert('Ngày trả phòng phải sau ngày nhận phòng!');
                    return false;
                }
            });
        });
    </script>
}